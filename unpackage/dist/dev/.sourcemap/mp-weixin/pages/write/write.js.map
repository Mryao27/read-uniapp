{"version":3,"sources":["webpack:///F:/H5/2020/5.27/read/main.js","webpack:///F:/H5/2020/5.27/read/pages/write/write.vue?f30d","webpack:///F:/H5/2020/5.27/read/pages/write/write.vue?17c2","webpack:///F:/H5/2020/5.27/read/pages/write/write.vue?b099","webpack:///F:/H5/2020/5.27/read/pages/write/write.vue?fdf1","webpack:///F:/H5/2020/5.27/read/pages/write/write.vue"],"names":["createPage","Page","loginRes","_self","signModel","require","data","title","artList","inputContent","needUploadImg","uploadIndex","caties","currentCateIndex","catiesFromApi","sedCateIndex","methods","removeImg","e","index","currentTarget","dataset","id","uni","showModal","content","success","confirm","splice","submit","res","detail","value","artText","length","showToast","icon","push","deleteText","addImg","chooseImage","count","sizeType","tempFilePaths","submitNow","i","type","uploadImg","showLoading","sign","getStorageSync","request","url","apiServer","method","header","JSON","stringify","uid","random","cate","console","log","status","setTimeout","switchTab","uploader","uploadFile","filePath","tmpurl","name","uploadFileRes","parse","indexID","staticServer","cateChange","sedIndex","cateName","k","onLoad","checkLogin","categories"],"mappings":"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","file":"pages/write/write.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/write/write.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./write.vue?vue&type=template&id=030b0292&\"\nvar renderjs\nimport script from \"./write.vue?vue&type=script&lang=js&\"\nexport * from \"./write.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"2020/5.27/read/pages/write/write.vue\"\nexport default component.exports","export * from \"-!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=template&id=030b0292&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../新建文件夹/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\tvar loginRes,_self\n\tvar signModel=require('../../commons/sign.js')\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttitle:'',\n\t\t\tartList:[],\n\t\t\tinputContent:'',\n\t\t\tneedUploadImg:[],\n\t\t\tuploadIndex:0,\n\t\t\t//分类\n\t\t\tcaties:['点击选择'],\n\t\t\tcurrentCateIndex:0,\n\t\t\tcatiesFromApi:[],\n\t\t\t//记录真实选择的api接口数据的分类id\n\t\t\tsedCateIndex:0\n\t\t}\n\t},\n\tmethods: {\n\t\tremoveImg(e){\n\t\t\tvar index=e.currentTarget.dataset.id\n\t\t\tuni.showModal({\n\t\t\t\tcontent:'确定要删除此图片吗？',\n\t\t\t\ttitle:'提示',\n\t\t\t\tsuccess(e){\n\t\t\t\t\tif(e.confirm){\n\t\t\t\t\t\t_self.artList.splice(index,1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmit(res){\n\t\t\tvar content=res.detail.value.artText\n\t\t\tif(content.length<1){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'请输入内容',\n\t\t\t\t\ticon:'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.artList.push({\"type\":\"text\",\"content\":content})\n\t\t\tthis.inputContent=''\n\t\t},\n\t\tdeleteText(e){\n\t\t\tvar index=e.currentTarget.dataset.id\n\t\t\tuni.showModal({\n\t\t\t\tcontent:'确定要删除此文本吗？',\n\t\t\t\ttitle:'提示',\n\t\t\t\tsuccess(e){\n\t\t\t\t\tif(e.confirm){\n\t\t\t\t\t\t_self.artList.splice(index,1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\taddImg(){\n\t\t\tuni.chooseImage({\n\t\t\t\tcount:1,\n\t\t\t\tsizeType:['compressed'],\n\t\t\t\tsuccess: res=>{\n\t\t\t\t\t_self.artList.push({\"type\":\"image\",\"content\":res.tempFilePaths[0]})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitNow(){\n\t\t\tif(this.title.length<2){uni.showToast({title:'请输入标题',icon:'none'}); return}\n\t\t\tif(this.artList.length<1){uni.showToast({title:'请填写文章内容',icon:'none'}); return}\n\t\t\tif(this.sedCateIndex<1){uni.showToast({title:'请选择分类',icon:'none'}); return}\n\t\t\tthis.needUploadImg=[]\n\t\t\tfor(var i=0;i<this.artList.length;i++){\n\t\t\t\tif(this.artList[i].type=='image'){\n\t\t\t\t\tthis.needUploadImg.push({'tmpurl':this.artList[i].content,'indexID':i});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.uploadImg()\n\t\t},\n\t\tuploadImg(){\n\t\t\tif(this.needUploadImg.length<1 || this.uploadIndex>=this.needUploadImg.length){\n\t\t\t\t//文章提交\n\t\t\t\tuni.showLoading({title:'正在提交'})\n\t\t\t\tvar sign=uni.getStorageSync('sign')\n\t\t\t\tuni.request({\n\t\t\t\t\turl:this.apiServer+'art&m=add',\n\t\t\t\t\tmethod:'POST',\n\t\t\t\t\theader:{'content-type' : \"application/x-www-form-urlencoded\"},\n\t\t\t\t\tdata:{\n\t\t\t\t\t\ttitle: _self.title,\n\t\t\t\t\t\tcontent: JSON.stringify(_self.artList),\n\t\t\t\t\t\tuid: loginRes[0],\n\t\t\t\t\t\trandom: loginRes[1],\n\t\t\t\t\t\tcate: _self.sedCateIndex,\n\t\t\t\t\t\tsign: sign\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif(res.data.status=='ok'){\n\t\t\t\t\t\t\tuni.showToast({title:'提交成功',icon:'none'})\n\t\t\t\t\t\t\t_self.artList=[]\n\t\t\t\t\t\t\t//清空数据\n\t\t\t\t\t\t\tsignModel.sign(_self.apiServer)\n\t\t\t\t\t\t\t//防止数据缓存\n\t\t\t\t\t\t\t_self.currentCateIndex=0\n\t\t\t\t\t\t\t_self.sedCateIndex=0\n\t\t\t\t\t\t\t_self.needUploadImg=[]\n\t\t\t\t\t\t\t_self.title=''\n\t\t\t\t\t\t\tthis.inputContent=''\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl:'../my/my'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.showToast({title:res.data.data,icon:'none'})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\t//图片上传\n\t\t\t\tuni.showLoading({title:'上传图片'})\n\t\t\t\tvar uploader=uni.uploadFile({\n\t\t\t\t\turl:_self.apiServer+'uploadimg&m=index',\n\t\t\t\t\tfilePath:_self.needUploadImg[_self.uploadIndex].tmpurl,\n\t\t\t\t\tname:'file',\n\t\t\t\t\tsuccess:(uploadFileRes)=>{\n\t\t\t\t\t\tuploadFileRes=JSON.parse(uploadFileRes.data)\n\t\t\t\t\t\tif(uploadFileRes.status!='ok'){\n\t\t\t\t\t\t\tconsole.log(uploadFileRes)\n\t\t\t\t\t\t\tuni.showToast({title:'上传图片失败，请重试',icon:'none'})\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//将已经上传的文件地址赋值给文章数据\n\t\t\t\t\t\tvar index=_self.needUploadImg[_self.uploadIndex].indexID\n\t\t\t\t\t\t_self.artList[index].content=_self.staticServer+uploadFileRes.data\n\t\t\t\t\t\tconsole.log(_self.artList)\n\t\t\t\t\t\t_self.uploadIndex++\n\t\t\t\t\t\t//递归上传\n\t\t\t\t\t\tsetTimeout(function(){_self.uploadImg()},1000)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcateChange(e){\n\t\t\t// console.log(e)\n\t\t\tvar sedIndex=e.detail.value\n\t\t\tthis.currentCateIndex=sedIndex\n\t\t\t//获取选择的分类名称\n\t\t\tif(sedIndex<1) return\n\t\t\tvar cateName=this.caties[sedIndex]\n\t\t\tfor(var k in this.catiesFromApi){\n\t\t\t\tif(cateName==this.catiesFromApi[k]){\n\t\t\t\t\tthis.sedCateIndex=k\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentCateIndex=sedIndex\n\t\t}\n\t},\n\tonLoad() {\n\t\t_self=this\n\t\tloginRes=this.checkLogin('../write/write',2)\n\t\tif(!loginRes) return false\n\t\t//签名\n\t\tsignModel.sign(_self.apiServer)\n\t\t//加载文章分类\n\t\tuni.request({\n\t\t\turl:this.apiServer+'category&m=index',\n\t\t\tmethod:\"GET\",\n\t\t\tsuccess: res => {\n\t\t\t\tif(res.data.status=='ok'){\n\t\t\t\t\t// console.log(res.data.data)\n\t\t\t\t\tvar categories=res.data.data\n\t\t\t\t\t//把数据格式整理为picker支持的格式['分类名'，······]\n\t\t\t\t\tfor(var k in categories){\n\t\t\t\t\t\t_self.caties.push(categories[k])\n\t\t\t\t\t}\n\t\t\t\t\t//记录分类信息\n\t\t\t\t\t_self.catiesFromApi=categories \n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n}\n"],"sourceRoot":""}